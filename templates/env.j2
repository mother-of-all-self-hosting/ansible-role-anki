{#
SPDX-FileCopyrightText: 2025 Suguru Hirahara

SPDX-License-Identifier: AGPL-3.0-or-later
#}

{#
See: https://github.com/timvisee/anki/blob/master/docs/docker.md
#}

# Server configuration
BASE_URL={{ anki_environment_variable_base_url }}
DETECT_BASE_URL={{ anki_environment_variable_detect_base_url | to_json }}
PORT={{ anki_environment_variable_port }}
NODE_ENV={{ anki_environment_variable_node_env }}
SEND_FOOTER_DMCA_URL={{ anki_environment_variable_anki_footer_dmca_url }}
SENTRY_CLIENT={{ anki_environment_variable_sentry_client }}
SENTRY_DSN={{ anki_environment_variable_sentry_dsn }}

# Upload and download limits
MAX_FILE_SIZE={{ anki_environment_variable_max_file_size }}
MAX_FILES_PER_ARCHIVE={{ anki_environment_variable_max_files_per_archive }}
MAX_EXPIRE_SECONDS={{ anki_environment_variable_max_expire_seconds }}
MAX_DOWNLOADS={{ anki_environment_variable_max_downloads }}
DOWNLOAD_COUNTS={{ anki_environment_variable_download_counts }}
EXPIRE_TIMES_SECONDS={{ anki_environment_variable_expire_times_seconds }}
DEFAULT_DOWNLOADS={{ anki_environment_variable_default_downloads }}
DEFAULT_EXPIRE_SECONDS={{ anki_environment_variable_default_expire_seconds }}

# Storage backend options
REDIS_HOST={{ anki_environment_variable_redis_host }}
REDIS_PORT={{ anki_environment_variable_redis_port }}
REDIS_USER={{ anki_environment_variable_redis_user }}
REDIS_PASSWORD={{ anki_environment_variable_redis_password }}
REDIS_DB={{ anki_environment_variable_redis_db }}
{% if anki_storage_backend_option == 'localsystem' %}
FILE_DIR={{ anki_environment_variable_file_dir }}
{% elif anki_storage_backend_option == 's3compatible' %}
S3_BUCKET={{ anki_environment_variable_S3_bucket }}
S3_ENDPOINT={{ anki_environment_variable_S3_endpoint }}
S3_USE_PATH_STYLE_ENDPOINT={{ anki_environment_variable_S3_use_path_style_endpoint | to_json }}
AWS_ACCESS_KEY_ID={{ anki_environment_variable_aws_access_key_id }}
AWS_SECRET_ACCESS_KEY={{ anki_environment_variable_aws_secret_access_key }}
{% elif anki_storage_backend_option == 'gcs' %}
GCS_BUCKET={{ anki_environment_variable_gcs_bucket }}
{% endif %}

{{ anki_environment_variables_additional_variables }}
